<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Jaybot9000</title>
  </head>
  <body>
    <form id="form">
      <label>
        Number plate:
      </label>
      <input type="text" id="np-input"/>
      <button type="submit" id="btn">Submit</button>
    </form>
    <br/>
    <div id="score"></div>
    <div id="liked"></div>

    <script type="module">
      import init, { jay, liked } from "./pkg/jay.js";
      init().then(() => {

          const calc = (e) => {
              e.preventDefault()
              
              const numberplate = document.getElementById("np-input").value;
              const r = document.getElementById("score");
              const l = document.getElementById("liked");

              const score = jay(numberplate);
              
              r.textContent = numberplate + " scored " + score
              if (liked(score)) {
                  l.textContent = "Good number plate!"
              } else {
                  l.textContent = ""
              }
          }

          const button = document.getElementById("btn");
          button.addEventListener("click", calc)
          const form = document.getElementById("form");
          form.addEventListener("submit", calc) 
      })
    </script>
  </body>
</html>
